<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <script>
      // [Quick Sort sudo code]
      // 1. 먼저, 배열의 길이가 1과 같거나 작게 될 경우 배열을 바로 리턴한다.
      // 2. 리스트 가운데 하나의 원소를 고르고 pivot 이라고 한다. : 첫번째 인덱스를 pivot으로 정했다.
      // 3. 배열 안에서 pivot을 제외한 모든 요소를 탐색해서 pivot보다 작으면 left, 크면 right라는 배열에 넣는다.
      // -> let left = []; let right = [];
      // -> 이 과정은 인덱스가 arr.length만큼 반복한다
      // 4. left와 right에 값이 모두 넣어졌으면 각각의 배열에 대해 quickSort를 재귀하도록 해서 다시 정렬한다.
      // 5. left, pivot, right를 합쳐서 리턴한다.
      "use restrict";
      document.write("[퀵 정렬] <br>");

      // 배열 정의
      let arr = [5, 3, 8, 4, 9, 1, 6, 2, 7];
      document.write("입력 배열: " + arr + "<br>");

      // 함수 정의
      const quickSort = function (arr) {
        if (arr.length <= 1) return arr;

        // 배열의 첫 번째 index를 pivot으로 정의
        // pivot과 크기를 비교하고 결과 값을 입력할 빈 배열 left, right 선언
        const pivot = arr[0];
        const left = [];
        const right = [];

        //
        for (let i = 1; i < arr.length; i++) {
          if (arr[i] <= pivot) left.push(arr[i]);
          else right.push(arr[i]);
        }

        // 1회 정렬 수행 시, 결과 출력
        console.log(`left: ${left}, pivot: ${pivot}, right: ${right}`);

        // 재귀함수. left 배열 퀵정렬 시작 + right 배열 퀵정렬 시작
        const lSorted = quickSort(left);
        const rSorted = quickSort(right);

        // ...(Spread Operator) : 배열의 값만 출력해주는 문법
        return [...lSorted, pivot, ...rSorted];
      };

      // return 값 가져오기
      var result = quickSort(arr);

      // 함수 호출 및 출력
      document.write("퀵 정렬 결과: " + result + "<br>");

      // 최대값, 최소값, 가운데 값 출력
      document.write("최소값: " + result[0] + "<br>");
      document.write("최대값: " + result[result.length - 1] + "<br>");
      document.write(
        "중앙값: " + result[Math.floor(result.length / 2)] + "<br>"
      );

      // 올림픽 식 계산
      let sum = 0;
      for (let i = 1; i < result.length - 1; i++) {
        sum += result[i];
      }
      document.write("올림픽 점수: " + sum);
    </script>
  </head>
  <body></body>
</html>
